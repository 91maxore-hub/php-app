server {
    listen 80;                     # Lyssna på port 80 (HTTP)
    server_name localhost;         # Servernamn (kan ändras till ditt domännamn)

    root /var/www/html;            # Rotmappen för webbservern (där index.php ligger)
    index index.php index.html;    # Standardfiler som serveras när man går till root

    # Hantera förfrågningar till webbplatsens root och försök hitta fil eller katalog,
    # annars skicka vidare till index.php med query-string
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # Servera statiska filer (css, js, bilder) direkt utan att gå via PHP
    location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg)$ {
        try_files $uri =404;  # Om filen inte finns, returnera 404
    }

    # Hantera PHP-filer med PHP-FPM
    location ~ \.php$ {
        include fastcgi_params;                      # Ladda FastCGI parametrar
        fastcgi_pass 172.19.0.4:9000;                 # Skicka PHP-förfrågan till PHP-FPM
        fastcgi_index index.php;                      # Standard PHP-fil
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; # Filens fulla sökväg
    }

    # Blockera åtkomst till .ht-filer (t.ex. .htaccess)
    location ~ /\.ht {
        deny all;
    }
}